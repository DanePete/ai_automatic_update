services:
  ai_upgrade_assistant.openai:
    class: Drupal\ai_upgrade_assistant\Service\OpenAIService
    arguments:
      - '@config.factory'
      - '@http_client'
      - '@logger.factory'

  ai_upgrade_assistant.analysis_tracker:
    class: Drupal\ai_upgrade_assistant\Service\AnalysisTracker
    arguments:
      - '@state'
      - '@config.factory'

  ai_upgrade_assistant.project_analyzer:
    class: Drupal\ai_upgrade_assistant\Service\ProjectAnalyzer
    arguments:
      - '@module_handler'
      - '@config.factory'
      - '@file_system'
      - '@ai_upgrade_assistant.openai'
      - '@upgrade_status.deprecation_analyzer'

  ai_upgrade_assistant.batch_analyzer:
    class: Drupal\ai_upgrade_assistant\Service\BatchAnalyzer
    arguments:
      - '@ai_upgrade_assistant.project_analyzer'
      - '@state'
      - '@string_translation'
      - '@module_handler'
      - '@ai_upgrade_assistant.analysis_tracker'
    calls:
      - [setStringTranslation, ['@string_translation']]

  ai_upgrade_assistant.patch_generator:
    class: Drupal\ai_upgrade_assistant\Service\PatchGenerator
    arguments:
      - '@file_system'
      - '@config.factory'
      - '@logger.factory'

  ai_upgrade_assistant.rollback_manager:
    class: Drupal\ai_upgrade_assistant\Service\RollbackManager
    arguments:
      - '@file_system'
      - '@state'
      - '@logger.factory'
      - '@config.factory'
